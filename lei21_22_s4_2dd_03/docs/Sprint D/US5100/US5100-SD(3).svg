<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1544px" preserveAspectRatio="none" style="width:2427px;height:1544px;background:#FFFFFF;" version="1.1" viewBox="0 0 2427 1544" width="2427px" zoomAndPan="magnify"><defs/><g><rect height="27.6094" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="218" x="1106.25" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="208" x="1111.25" y="29.5332">AGV Digital Twin Management</text><rect fill="#FFFFFF" height="1411.9688" style="stroke:#181818;stroke-width:1.0;" width="10" x="94" y="86.2188"/><rect fill="#FFFFFF" height="494.2188" style="stroke:#181818;stroke-width:1.0;" width="10" x="399" y="724.5078"/><rect fill="#FFFFFF" height="517.625" style="stroke:#181818;stroke-width:1.0;" width="10" x="602" y="108.5703"/><rect fill="#FFFFFF" height="134.4063" style="stroke:#181818;stroke-width:1.0;" width="10" x="602" y="754.8594"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="602" y="988.3203"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="602" y="1081.0234"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="602" y="1173.7266"/><rect fill="#FFFFFF" height="242.1094" style="stroke:#181818;stroke-width:1.0;" width="10" x="602" y="1241.0781"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="931.5" y="199.625"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="931.5" y="260.3281"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="931.5" y="1392.8359"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1059.5" y="828.5625"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1059.5" y="1453.1875"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1320.5" y="321.0313"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1453" y="407.0859"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1601.5" y="528.4922"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1808" y="138.9219"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="2007" y="1271.4297"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="2007" y="1332.1328"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2188" y="596.1953"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="2349" y="467.7891"/><rect height="200.4609" style="stroke:#000000;stroke-width:1.5;fill:none;" width="1941" x="480.5" y="366.3828"/><rect height="849.9922" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2089.5" x="10" y="641.1953"/><rect height="78.7031" style="stroke:#000000;stroke-width:1.5;fill:none;" width="415.5" x="318" y="947.6172"/><rect height="78.7031" style="stroke:#000000;stroke-width:1.5;fill:none;" width="415.5" x="318" y="1040.3203"/><rect height="78.7031" style="stroke:#000000;stroke-width:1.5;fill:none;" width="415.5" x="318" y="1133.0234"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="99" x2="99" y1="76.2188" y2="1508.1875"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="404" x2="404" y1="690.8516" y2="1508.1875"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="606.5" x2="606.5" y1="76.2188" y2="1508.1875"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="850.5" x2="850.5" y1="76.2188" y2="1508.1875"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="936.5" x2="936.5" y1="76.2188" y2="1508.1875"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1064.5" x2="1064.5" y1="76.2188" y2="1508.1875"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1201.5" x2="1201.5" y1="76.2188" y2="1508.1875"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1325.5" x2="1325.5" y1="76.2188" y2="1508.1875"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1457.5" x2="1457.5" y1="76.2188" y2="1508.1875"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1606.5" x2="1606.5" y1="76.2188" y2="1508.1875"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1812.5" x2="1812.5" y1="76.2188" y2="1508.1875"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2011.5" x2="2011.5" y1="76.2188" y2="1508.1875"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2192.5" x2="2192.5" y1="76.2188" y2="1508.1875"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2353.5" x2="2353.5" y1="76.2188" y2="1508.1875"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="158" x="20" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144" x="27" y="65.1426">:AGVMovementThread</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="158" x="20" y="1507.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144" x="27" y="1528.7207">:AGVMovementThread</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="152" x="328" y="1507.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="335" y="1528.7207">sensor:SensorThread</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="233" x="490.5" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="219" x="497.5" y="65.1426">controller:AGVMovementController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="233" x="490.5" y="1507.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="219" x="497.5" y="1528.7207">controller:AGVMovementController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="810.5" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="817.5" y="65.1426">plant:Plant</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="810.5" y="1507.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="817.5" y="1528.7207">plant:Plant</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70" x="901.5" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="908.5" y="65.1426">agv:AGV</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70" x="901.5" y="1507.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="908.5" y="1528.7207">agv:AGV</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="166" x="981.5" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="988.5" y="65.1426">repo:JpaAGVRepository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="166" x="981.5" y="1507.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="988.5" y="1528.7207">repo:JpaAGVRepository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89" x="1157.5" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="1164.5" y="65.1426">route:Route</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89" x="1157.5" y="1507.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="1164.5" y="1528.7207">route:Route</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="1256.5" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="1263.5" y="65.1426">order:ProductOrder</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="1256.5" y="1507.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="1263.5" y="1528.7207">order:ProductOrder</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="1404.5" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="1411.5" y="65.1426">item:OrderItem</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="1404.5" y="1507.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="1411.5" y="1528.7207">item:OrderItem</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="170" x="1521.5" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="1528.5" y="65.1426">location:ProductLocation</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="170" x="1521.5" y="1507.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="1528.5" y="1528.7207">location:ProductLocation</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="223" x="1701.5" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="209" x="1708.5" y="65.1426">plantRepo:JPARepository&lt;Plant&gt;</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="223" x="1701.5" y="1507.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="209" x="1708.5" y="1528.7207">plantRepo:JPARepository&lt;Plant&gt;</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="155" x="1934.5" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="1941.5" y="65.1426">position:RoutePosition</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="155" x="1934.5" y="1507.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="1941.5" y="1528.7207">position:RoutePosition</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="187" x="2099.5" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="173" x="2106.5" y="65.1426">routePlanner:RoutePlanner</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="187" x="2099.5" y="1507.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="173" x="2106.5" y="1528.7207">routePlanner:RoutePlanner</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="2296.5" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="2303.5" y="65.1426">product:Product</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="2296.5" y="1507.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="2303.5" y="1528.7207">product:Product</text><rect fill="#FFFFFF" height="1411.9688" style="stroke:#181818;stroke-width:1.0;" width="10" x="94" y="86.2188"/><rect fill="#FFFFFF" height="494.2188" style="stroke:#181818;stroke-width:1.0;" width="10" x="399" y="724.5078"/><rect fill="#FFFFFF" height="517.625" style="stroke:#181818;stroke-width:1.0;" width="10" x="602" y="108.5703"/><rect fill="#FFFFFF" height="134.4063" style="stroke:#181818;stroke-width:1.0;" width="10" x="602" y="754.8594"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="602" y="988.3203"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="602" y="1081.0234"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="602" y="1173.7266"/><rect fill="#FFFFFF" height="242.1094" style="stroke:#181818;stroke-width:1.0;" width="10" x="602" y="1241.0781"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="931.5" y="199.625"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="931.5" y="260.3281"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="931.5" y="1392.8359"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1059.5" y="828.5625"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1059.5" y="1453.1875"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1320.5" y="321.0313"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1453" y="407.0859"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1601.5" y="528.4922"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1808" y="138.9219"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="2007" y="1271.4297"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="2007" y="1332.1328"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2188" y="596.1953"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="2349" y="467.7891"/><polygon fill="#181818" points="590,104.5703,600,108.5703,590,112.5703,594,108.5703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="104" x2="596" y1="108.5703" y2="108.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="111" y="103.7139">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="122" y="103.7139">calculateRoute(agv,obstacleList)</text><polygon fill="#181818" points="1796,134.9219,1806,138.9219,1796,142.9219,1800,138.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="612" x2="1802" y1="138.9219" y2="138.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="619" y="134.0654">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="630" y="134.0654">findAll()</text><polygon fill="#181818" points="623,165.2734,613,169.2734,623,173.2734,619,169.2734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="617" x2="1812" y1="169.2734" y2="169.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="629" y="164.417">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="28" x="640" y="164.417">plant</text><polygon fill="#181818" points="919.5,195.625,929.5,199.625,919.5,203.625,923.5,199.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="612" x2="925.5" y1="199.625" y2="199.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="619" y="194.7686">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="630" y="194.7686">dock()</text><polygon fill="#181818" points="623,225.9766,613,229.9766,623,233.9766,619,229.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="617" x2="935.5" y1="229.9766" y2="229.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="629" y="225.1201">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="28" x="640" y="225.1201">dock</text><polygon fill="#181818" points="919.5,256.3281,929.5,260.3281,919.5,264.3281,923.5,260.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="612" x2="925.5" y1="260.3281" y2="260.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="619" y="255.4717">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="630" y="255.4717">order()</text><polygon fill="#181818" points="623,286.6797,613,290.6797,623,294.6797,619,290.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="617" x2="935.5" y1="290.6797" y2="290.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="629" y="285.8232">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="640" y="285.8232">order</text><polygon fill="#181818" points="1308.5,317.0313,1318.5,321.0313,1308.5,325.0313,1312.5,321.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="612" x2="1314.5" y1="321.0313" y2="321.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="619" y="316.1748">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="630" y="316.1748">items()</text><polygon fill="#181818" points="623,347.3828,613,351.3828,623,355.3828,619,351.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="617" x2="1324.5" y1="351.3828" y2="351.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="629" y="346.5264">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="640" y="346.5264">items</text><path d="M480.5,366.3828 L553.5,366.3828 L553.5,374.7344 L543.5,384.7344 L480.5,384.7344 L480.5,366.3828 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="200.4609" style="stroke:#000000;stroke-width:1.5;" width="1941" x="480.5" y="366.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="495.5" y="380.8779">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="81" x="568.5" y="379.8018">[for each item]</text><polygon fill="#181818" points="1441,403.0859,1451,407.0859,1441,411.0859,1445,407.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="612" x2="1447" y1="407.0859" y2="407.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="619" y="402.2295">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="637" y="402.2295">product()</text><polygon fill="#181818" points="623,433.4375,613,437.4375,623,441.4375,619,437.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="617" x2="1457" y1="437.4375" y2="437.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="629" y="432.5811">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="647" y="432.5811">product</text><polygon fill="#181818" points="2337,463.7891,2347,467.7891,2337,471.7891,2341,467.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="612" x2="2343" y1="467.7891" y2="467.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="619" y="462.9326">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="637" y="462.9326">location()</text><polygon fill="#181818" points="623,494.1406,613,498.1406,623,502.1406,619,498.1406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="617" x2="2353" y1="498.1406" y2="498.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="629" y="493.2842">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="647" y="493.2842">location</text><polygon fill="#181818" points="1589.5,524.4922,1599.5,528.4922,1589.5,532.4922,1593.5,528.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="612" x2="1595.5" y1="528.4922" y2="528.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="619" y="523.6357">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="637" y="523.6357">aisle()</text><polygon fill="#181818" points="623,554.8438,613,558.8438,623,562.8438,619,558.8438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="617" x2="1605.5" y1="558.8438" y2="558.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="629" y="553.9873">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="647" y="553.9873">aisle</text><polygon fill="#181818" points="2176,592.1953,2186,596.1953,2176,600.1953,2180,596.1953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="612" x2="2182" y1="596.1953" y2="596.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="619" y="591.3389">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263" x="637" y="591.3389">calculateRoute(plant, obstacleList,dock,aisle)</text><path d="M10,641.1953 L83,641.1953 L83,649.5469 L73,659.5469 L10,659.5469 L10,641.1953 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="849.9922" style="stroke:#000000;stroke-width:1.5;" width="2089.5" x="10" y="641.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="25" y="655.6904">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="126" x="98" y="654.6143">[until route is finished]</text><polygon fill="#181818" points="316,677.8984,326,681.8984,316,685.8984,320,681.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="104" x2="322" y1="681.8984" y2="681.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="111" y="677.042">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="129" y="677.042">create(agv,nextPosition,priority)</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="152" x="328" y="659.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="335" y="681.0801">sensor:SensorThread</text><polygon fill="#181818" points="387,720.5078,397,724.5078,387,728.5078,391,724.5078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="104" x2="393" y1="724.5078" y2="724.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="111" y="719.6514">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="129" y="719.6514">run()</text><polygon fill="#181818" points="590,750.8594,600,754.8594,590,758.8594,594,754.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="409" x2="596" y1="754.8594" y2="754.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="416" y="750.0029">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="434" y="750.0029">verifyPosition(nextPosition)</text><line style="stroke:#181818;stroke-width:1.0;" x1="612" x2="654" y1="785.2109" y2="785.2109"/><line style="stroke:#181818;stroke-width:1.0;" x1="654" x2="654" y1="785.2109" y2="798.2109"/><line style="stroke:#181818;stroke-width:1.0;" x1="613" x2="654" y1="798.2109" y2="798.2109"/><polygon fill="#181818" points="623,794.2109,613,798.2109,623,802.2109,619,798.2109" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="619" y="780.3545">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="637" y="780.3545">validatePosition(nextPosition,plant)</text><polygon fill="#181818" points="1047.5,824.5625,1057.5,828.5625,1047.5,832.5625,1051.5,828.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="612" x2="1053.5" y1="828.5625" y2="828.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="619" y="823.7061">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="637" y="823.7061">searchObstacles(nextPosition)</text><polygon fill="#181818" points="623,854.9141,613,858.9141,623,862.9141,619,858.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="617" x2="1063.5" y1="858.9141" y2="858.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="629" y="854.0576">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="647" y="854.0576">result</text><polygon fill="#181818" points="420,885.2656,410,889.2656,420,893.2656,416,889.2656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="414" x2="606" y1="889.2656" y2="889.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="426" y="884.4092">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="444" y="884.4092">result</text><line style="stroke:#181818;stroke-width:1.0;" x1="409" x2="451" y1="919.6172" y2="919.6172"/><line style="stroke:#181818;stroke-width:1.0;" x1="451" x2="451" y1="919.6172" y2="932.6172"/><line style="stroke:#181818;stroke-width:1.0;" x1="410" x2="451" y1="932.6172" y2="932.6172"/><polygon fill="#181818" points="420,928.6172,410,932.6172,420,936.6172,416,932.6172" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="416" y="914.7607">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="434" y="914.7607">updateAGV(agv,option)</text><path d="M318,947.6172 L379,947.6172 L379,955.9688 L369,965.9688 L318,965.9688 L318,947.6172 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="78.7031" style="stroke:#000000;stroke-width:1.5;" width="415.5" x="318" y="947.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="333" y="962.1123">alt</text><polygon fill="#181818" points="590,984.3203,600,988.3203,590,992.3203,594,988.3203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="409" x2="596" y1="988.3203" y2="988.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="416" y="983.4639">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="434" y="983.4639">slowDown(agv)</text><path d="M318,1040.3203 L379,1040.3203 L379,1048.6719 L369,1058.6719 L318,1058.6719 L318,1040.3203 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="78.7031" style="stroke:#000000;stroke-width:1.5;" width="415.5" x="318" y="1040.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="333" y="1054.8154">alt</text><polygon fill="#181818" points="590,1077.0234,600,1081.0234,590,1085.0234,594,1081.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="409" x2="596" y1="1081.0234" y2="1081.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="416" y="1076.167">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="434" y="1076.167">stop(agv)</text><path d="M318,1133.0234 L379,1133.0234 L379,1141.375 L369,1151.375 L318,1151.375 L318,1133.0234 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="78.7031" style="stroke:#000000;stroke-width:1.5;" width="415.5" x="318" y="1133.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="333" y="1147.5186">alt</text><polygon fill="#181818" points="590,1169.7266,600,1173.7266,590,1177.7266,594,1173.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="409" x2="596" y1="1173.7266" y2="1173.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="416" y="1168.8701">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="434" y="1168.8701">speedUp(agv)</text><polygon fill="#181818" points="590,1237.0781,600,1241.0781,590,1245.0781,594,1241.0781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="104" x2="596" y1="1241.0781" y2="1241.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="111" y="1236.2217">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="129" y="1236.2217">updateAGVPosition(agv,routePosition)</text><polygon fill="#181818" points="1995,1267.4297,2005,1271.4297,1995,1275.4297,1999,1271.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="612" x2="2001" y1="1271.4297" y2="1271.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="619" y="1266.5732">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="637" y="1266.5732">coordinates()</text><polygon fill="#181818" points="623,1297.7813,613,1301.7813,623,1305.7813,619,1301.7813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="617" x2="2011" y1="1301.7813" y2="1301.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="629" y="1296.9248">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="647" y="1296.9248">coordinates</text><polygon fill="#181818" points="1995,1328.1328,2005,1332.1328,1995,1336.1328,1999,1332.1328" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="612" x2="2001" y1="1332.1328" y2="1332.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="619" y="1327.2764">31</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="637" y="1327.2764">direction()</text><polygon fill="#181818" points="623,1358.4844,613,1362.4844,623,1366.4844,619,1362.4844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="617" x2="2011" y1="1362.4844" y2="1362.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="629" y="1357.6279">32</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="647" y="1357.6279">direction</text><polygon fill="#181818" points="919.5,1388.8359,929.5,1392.8359,919.5,1396.8359,923.5,1392.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="612" x2="925.5" y1="1392.8359" y2="1392.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="619" y="1387.9795">33</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="637" y="1387.9795">updateCoordinates(coordinates,direction)</text><polygon fill="#181818" points="1047.5,1449.1875,1057.5,1453.1875,1047.5,1457.1875,1051.5,1453.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="612" x2="1053.5" y1="1453.1875" y2="1453.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="619" y="1448.3311">34</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="637" y="1448.3311">save(agv)</text><!--MD5=[e2e8829441f726dea31a0c9a73684efe]
@startuml
title AGV Digital Twin Management
autonumber

participant ":AGVMovementThread" as thread
participant "sensor:SensorThread" as sensor
participant "controller:AGVMovementController" as controller
participant "plant:Plant" as plant
participant "agv:AGV" as agv
participant "repo:JpaAGVRepository" as repo
participant "route:Route" as route
participant "order:ProductOrder" as order
participant "item:OrderItem" as item
participant "location:ProductLocation" as location
participant "plantRepo:JPARepository<Plant>" as plantRepo
participant "position:RoutePosition" as position
participant "routePlanner:RoutePlanner" as routePlanner
participant "product:Product" as product

activate thread
    note right: Server communication omitted \nfor simplification.

    thread -> controller:calculateRoute(agv,obstacleList)
    activate controller
        controller -> plantRepo: findAll()
        activate plantRepo
            plantRepo- ->controller:plant
        deactivate plantRepo

        controller-> agv:dock()
        activate agv
            agv- ->controller:dock
        deactivate agv

        controller->agv:order()
        activate agv
            agv- ->controller:order
        deactivate agv

        controller->order:items()
        activate order
            order- -> controller:items
        deactivate order
        loop for each item
            controller -> item:product()
            activate item
                item- ->controller:product
            deactivate item

            controller ->product:location()
            activate product
                product- ->controller:location
            deactivate product

            controller -> location:aisle()
            activate location
                location- ->controller:aisle
            deactivate location
        end

    controller->routePlanner:calculateRoute(plant, obstacleList,dock,aisle)
    activate routePlanner
    deactivate routePlanner
    deactivate controller

    loop until route is finished
    thread -> sensor**: create(agv,nextPosition,priority)
    thread -> sensor: run()
    activate sensor
            sensor -> controller:verifyPosition(nextPosition)
            activate controller
                controller -> controller:validatePosition(nextPosition,plant)
                controller ->repo:searchObstacles(nextPosition)
                activate repo
                    repo- -> controller: result
                deactivate repo
                controller - -> sensor: result
            deactivate controller
            sensor -> sensor:updateAGV(agv,option)
            alt
                sensor -> controller: slowDown(agv)
                activate controller
                deactivate controller
            end

            alt
                sensor -> controller: stop(agv)
                activate controller
                deactivate controller
            end

            alt
                sensor -> controller: speedUp(agv)
                activate controller
                deactivate controller
            end
    deactivate sensor

    thread -> controller:updateAGVPosition(agv,routePosition)
    activate controller
        controller ->position:coordinates()
        activate position
            position- -> controller:coordinates
        deactivate position

        controller ->position:direction()
                activate position
                    position- -> controller:direction
                deactivate position

        controller -> agv:updateCoordinates(coordinates,direction)
        activate agv
        deactivate agv
        controller->repo:save(agv)
        activate repo
        deactivate repo
    deactivate controller

    end
deactivate thread
@enduml

PlantUML version 1.2022.4(Sat Apr 09 14:29:17 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>