# US3501- Survey Answer and Notification
=======================================

# 1. Analysis

## 1.1. User Story Description and Interpretation

#### Description:

> As Customer, I want to get the list of questionnaires that the system is asking me to answer and be able to answer any of those questionnaires.
#### Acceptance Criteria

>Notice that the UI should be generated dynamically in accordance to the given questionnaire. I.e. que UI is generated by interpreting the input questionnaire. 
> <br>
>The answers should be saved in a raw text format to be further processed/analyzed.
## 1.2. Client Clarifications

### From Document

* >Among other functionalities, the surveys area includes:
  ><br><br>
  > (...)
  ><br><br>
  >2 . View notifications to answer a survey/questionnaire. <u>Customers should be able to get a list of all the notifications received to answer a given survey.</u> A customer receives a notification when (s)he meets the target audience of a given survey.
  ><br><br>
  > 3 . Answer a survey/questionnaire. Following a received notification, customers answer the questions of the requested questionnaire.

* >Yet, it is worth considering that a questionnaire might have mandatory and optional sections/questions and that some sections/questions might become mandatory/optional <u>depending on the answer given to a previous question</u>.

* >Customer: responsible to keep his/her own personal information updated, to create orders and follow their status and <u>answer a survey questionnaire when requested and at his/her willing</u>
  


### From Forum

* > **Q:** Do we only want to show the notification to the client, or do we also use it to get a certain statistic with it that demands it?
  > <br><br>
  > **A:** Notifications are shown and used to ease the client to answer the survey. 
  ><br><br> 
  >Statistics might be made, for instance, based on the number of notifications and the total amount of answers received.
  > <br>[Link to forum](https://moodle.isep.ipp.pt/mod/forum/discuss.php?d=15595#p20113)

* > **Q:** Do the answers of surveys need to be linked to the user that answered the specific survey, is it anonymous or does it not matter?
  > <br><br>
  > **A:** While specifying a survey (US3001) the need (or not) to preserve a link to the user answering the questionnaire is defined. 
  > <br><br>
  > Some surveys will be answered anonymously (not having a link to the user) while other might be answered identifying the users. 
  > <br><br>
  > In either cases, the system must know if a user has (or not) already answered a given questionnaire.
  > <br>[Link to forum](https://moodle.isep.ipp.pt/mod/forum/discuss.php?d=15806#p20308)


* >**Q:** Which of the following scenarios do you want for the action of determining the target audience of each survey/questionnaire:
  > <br><br>
  > Scenario 1: After a survey is created, the target audience for that survey is identified at the moment of the survey creation and cannot be extended in the future. Example: if a survey is created at the 1st of June and one of the rules for that survey is that a client must be of male gender than the target audience of that survey will be all the male customers registered up until the 1st of June. If a new male customer arises on the 2nd of June he will not be considered as a target audience of that survey. 
  > <br><br>Scenario 2: The target audience of each survey is constantly extended up until the end date of the survey/questionnaire. Example: if a survey is created at the 1st of June and itâ€™s end date is at the 20th of June and one of the rules for that survey is that a client must be of male gender, than all existent male customers up until the 1st of June and all the clients with male gender that arise between the 1st of June and the 20th of June will also be eligible for that survey/questionnaire.
  > <br><br>
  > **A:** In the scope of Sprint D, the first scenario is more than enough.
  > <br>[Link to forum](https://moodle.isep.ipp.pt/mod/forum/discuss.php?d=17051#p21863)

#2. Design

##2.1. Notify Customer

![Class Diagram(1)](US3501-CD(1).svg)
<br>
<br>
![Class Diagram(1)](US3501-SD(1).svg)

##2.2. Answer Question

![Class Diagram(2)](US3501-CD(2).svg)
<br>
<br>
![Class Diagram(2)](US3501-SD(2).svg)

#3. Implementation

##3.1 Basic Strategy

To implement the current User Story, the following strategy is being implemented.

**(Notification):**

* When a survey is created, verify all customers, and notify those you meet the targeted conditions.
* When a new customer is created, verify is there are surveys to answer. (Not implemented yet)
* When a Customer orders a product, verify if any surveys should become available. (Not implemented yet)

**(Answer):**

* First, export the chosen survey into a formatted text file with empty spots for the answers.
* Allow the user to answer
* Read the entire file and define the answers.
* Verify the basic answer logistic (Free-Text answers cannot have options etc)

## 4. Annotations

For this user story, in contrary to the previous approach, the team will not try to simplify the given problem (by technical team's request).

Instead, the development team will place a greater impact on the grammars work, while trying to keep an easy maintenance environment.

**ATENTION:** Even if US3001 approach to the problem shall be modified in the future, this user story will stay functional if the major information (survey, questionnaire, etc) stays similar and the structure doesn't become too much diferent.